title: Shell 命令行批量处理图片文件名
date: 2017-08-01 11:08:38 +0800
update: 2017-08-01 11:08:38 +0800
author: fungleo
tags:
    -shell
    -批量处理文件名
    -md5命令
---

# Shell 命令行批量处理图片文件名

从网上下载了一堆图片，有的是`*.jpg`的，有的是`*.jpeg`的。并且文件名有长有短，很是糟心。因此，我想把这些文件给全部整理好，当然是用`shell`来处理啦！

说干就干。

## 循环所有文件

首先，我把所有的乱七八糟的图片，全部放在 `./image/` 这个文件夹下面。
然后在外层写一个`i.sh`的`shell`文件，录入下面的内容。

我的文件结构演示如下：

|文件|
|---|
|image/xxx.jpg|
|image/xxx.jpeg|
|i.sh|

```
for f in $(find ./image -iname "*.*"); do
  echo $f
done
```
然后执行 `sh i.sh` 命令，顺利在命令行里面输出了所有的图片文件。

## 实现 i++ 数字效果

我想把图片全部命名为 `1.jpg 2.jpg` 这样的图片文件，所以就需要一个类似于`js`的`i++`效果。

于是，把上面代码修改为

```
# 搞一个i的变量
i=1
for f in $(find ./image -iname "*.*"); do
  ## 打印 i
  echo $i
  echo $f
  ## 计算i++
  ((i++))
done
```
OK,已经顺利的输出了数字了。到这一步就很明显的得到了我们想要的，下面只要把文件给复制一下就好了。

## 实现重命名效果

```
# 搞一个i的变量
i=1
mkdir img
for f in $(find ./image -iname "*.*"); do
  cp $f ./img/$i.jpg
  ## 计算i++
  ((i++))
done
```

好，如上，我们就将图片全部根据数字重命名，并且放到了一个新的`img`文件夹中。我们想要的效果就实现了。

## 用MD5值命名图片

突然想到，数字这东西不靠谱，下次不小心执行了，很容易把图片给搞乱掉，还是MD5值靠谱，并且注意，还能过滤同样的图片。

嗯，理想很丰满，我们来看看。

```
md5 -q $file
```
可以输出文件的MD5计算值。就用这个了。改造上面代码如下：

```
mkdir img
for f in $(find ./image -iname "*.*"); do
  # 计算MD5值，并赋予一个变量
  a=$(md5 -q $f)
  # 复制文件
  cp $f ./img/$a.jpg
done
```

我是想拿这一堆文件重复实现，所以用复制，如果不需要这样考虑，完全可以使用`mv`重命名，代码如下：

```
mkdir img
for f in $(find ./image -iname "*.*"); do
  # 计算MD5值，并赋予一个变量
  a=$(md5 -q $f)
  # 复制文件
  mv $f ./image/$a.jpg
done
```

以上所有命令均基于MAC系统运行。如果是Linux 可能有细微差异。

版权申明：本文为FungLeo原创，允许转载，但转载必须附加本文首发链接。


